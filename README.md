
  โครงการ: ระบบติดตามและบันทึกข้อมูล ข้อมูลน้ำยาง


== ภาพรวม (Overview) ==

โปรเจกต์นี้เป็นเว็บแอปพลิเคชันที่พัฒนาด้วย PHP สำหรับจัดการข้อมูลที่ส่งมาจากอุปกรณ์ IoT (เช่น ESP32)
โดยมีหน้าที่หลัก 2 ส่วน:
1.  รับข้อมูล (Data Ingestion) ที่อุปกรณ์ส่งมาและบันทึกลงฐานข้อมูล
2.  แสดงผลข้อมูล (Dashboard) ที่บันทึกไว้ให้ผู้ใช้ดูผ่านหน้าเว็บ


== คำอธิบายไฟล์ (File Descriptions) ==

* db_connect.php
    * หน้าที่: ไฟล์สำหรับเชื่อมต่อฐานข้อมูล (Database Connection)
    * รายละเอียด: เป็นไฟล์หลักที่เก็บข้อมูลสำคัญ (Credentials) เช่น Host, Username, Password, และชื่อฐานข้อมูล (Database Name)
    * ไฟล์อื่น ๆ (เช่น api.php, dbwrite.php) จะต้อง `include` หรือ `require` ไฟล์นี้เพื่อเชื่อมต่อ DB

* dbwrite.php
    * หน้าที่: API สำหรับ "รับข้อมูล" จากอุปกรณ์ IoT (Data Ingestion Endpoint)
    * รายละเอียด: นี่คือไฟล์ที่อุปกรณ์ ESP32 หรือ IoT จะส่งข้อมูล (เช่น ผ่าน HTTP POST หรือ GET) เข้ามา
    * ไฟล์นี้จะรับค่า (เช่น ค่าเซ็นเซอร์, สถานะเครื่อง) แล้วนำไปบันทึกลงในฐานข้อมูล

* api.php
    * หน้าที่: API สำหรับ "ส่งข้อมูล" ไปยังหน้าเว็บ (Data API for Frontend)
    * รายละเอียด: ไฟล์นี้ทำหน้าที่ดึงข้อมูลจากฐานข้อมูล (เช่น ข้อมูลย้อนหลัง, สถานะล่าสุด)
    * มักจะถูกเรียกใช้โดยหน้าเว็บ (app.php) ผ่าน JavaScript (AJAX/Fetch) เพื่อแสดงผลข้อมูลแบบ Real-time หรือสร้างกราฟ
    * ผลลัพธ์มักจะเป็นรูปแบบ JSON

* app.php
    * หน้าที่: หน้าแอปพลิเคชันหลัก หรือ Dashboard
    * รายละเอียด: นี่คือไฟล์ที่ผู้ใช้เปิดดูผ่านเว็บเบราว์เซอร์
    * เป็นหน้า UI (User Interface) ที่แสดงผลข้อมูลต่าง ๆ เช่น ตารางข้อมูล, กราฟ, สถานะปัจจุบัน
    * ไฟล์นี้จะเรียกใช้ `api.php` เพื่อดึงข้อมูลมาแสดงผล

* price_fetcher.php
    * หน้าที่: สคริปต์สำหรับดึงข้อมูลราคา (เช่น ราคายาง)
    * รายละเอียด: ไฟล์นี้อาจไม่ได้เชื่อมต่อกับระบบ IoT โดยตรง แต่ทำหน้าที่ไปดึงข้อมูลจากเว็บไซต์ภายนอกหรือ API อื่น ๆ
    * อาจถูกเรียกใช้งานเป็นระยะๆ (เช่น Cron Job) เพื่ออัปเดตราคาในฐานข้อมูล แล้วนำไปแสดงผลใน `app.php`


== การติดตั้ง (Setup) ==

1.  **ฐานข้อมูล (Database):**
    * สร้างฐานข้อมูล MySQL/MariaDB
    * นำเข้าโครงสร้างตาราง (Schema) ที่จำเป็น (เช่น ตาราง `logs`, ตาราง `device_status`)

2.  **ตั้งค่าการเชื่อมต่อ:**
    * เปิดไฟล์ `db_connect.php`
    * แก้ไขค่า `$servername`, `$username`, `$password`, และ `$dbname` ให้ถูกต้องตามการตั้งค่าฐานข้อมูลของคุณ

3.  **อัปโหลด:**
    * อัปโหลดไฟล์ทั้งหมดขึ้นไปยัง Web Server ที่รองรับ PHP (เช่น Apache, Nginx)

4.  **ตั้งค่าอุปกรณ์ IoT (ESP32):**
    * แก้ไขโค้ดในส่วนของ ESP32 ให้ชี้ URL มายังไฟล์ `dbwrite.php`
    * ตัวอย่าง: `http://<your-domain.com>/dbwrite.php`


== การใช้งาน (Usage) ==

* **สำหรับผู้ใช้:**
    * เข้าชมหน้า Dashboard ได้ที่: `http://<your-domain.com>/app.php`

* **สำหรับอุปกรณ์:**
    * อุปกรณ์จะส่งข้อมูลมาที่: `http://<your-domain.com>/dbwrite.php`


== ข้อควรระวัง (Note) ==

* ไฟล์ `db_connect.php` มีข้อมูลรหัสผ่านฐานข้อมูล ห้ามเปิดเผยไฟล์นี้ต่อสาธารณะ หรือเก็บไว้ใน Git Repository ที่เป็น Public
